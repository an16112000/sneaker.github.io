{"ast":null,"code":"import _regeneratorRuntime from\"/Users/doandinhan/Documents/workspace/getDataSNKRDUNK/getdata/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/doandinhan/Documents/workspace/getDataSNKRDUNK/getdata/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/doandinhan/Documents/workspace/getDataSNKRDUNK/getdata/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{VND}from\"../changeCurrency/changeCurrency\";import{getRateJp,getRateKor}from\"../rate\";import{instance,instanceKream}from\"../services\";import{getIdProductKream}from\"../getDataFromKream/getIdProductKream\";import{getSalesHistorySNKRDUNK}from'../getDataFromSNKRDUNK/getSalesHistorySNKRDUNK';export var getDataMenu=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(type,page){var response,rateKor,rateJp,data,arrKor,i,result,_i,isPriceSnkrDunkOk,isSnkrDunkOk,isHistorySnkrDunkOk,isHistoryKreamOk,isPriceKreamOk,isKreamOk,responseJP,responseKream,historySnkrDunk,min_priceJp,min_priceKream;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return instance.get(\"https://www.soldout.co.kr/api/v3/search/get-item-list?&typeGb=goods&pageIndex=\".concat(page,\"&pageSize=12&keyword=\").concat(type));case 2:response=_context.sent;_context.next=5;return getRateKor();case 5:rateKor=_context.sent;_context.next=8;return getRateJp();case 8:rateJp=_context.sent;data=response.data.data.product_info.list.map(function(item){for(var i=0;i<item.model_no.length;i++){if(item.model_no[i]==' '||item.model_no[i]=='/'){item.model_no=item.model_no.slice(0,-item.model_no.length+i);}}return{code:item.model_no,type:item.brand_name_eng,min_priceSoldOut:VND.format(Math.floor(item.min_price*rateKor)),name:item.name_eng,img:item.image_path};});arrKor=[];i=0;case 12:if(!(i<data.length)){_context.next=20;break;}_context.next=15;return data[i];case 15:result=_context.sent;arrKor.push(result);case 17:i++;_context.next=12;break;case 20:_i=0;case 21:if(!(_i<arrKor.length)){_context.next=52;break;}_context.prev=22;isPriceSnkrDunkOk=false;isSnkrDunkOk=false;isHistorySnkrDunkOk=false;isHistoryKreamOk=false;isPriceKreamOk=false;isKreamOk=false;_context.next=31;return instance.get(\"https://snkrdunk.com/v1/products/\".concat(arrKor[_i].code,\"/sales-history?\"));case 31:responseJP=_context.sent;_context.next=34;return instanceKream.get(\"https://kream.co.kr/api/p/tabs/all/?keyword=\".concat(arrKor[_i].code,\"&request_key=59f3e93d-13b1-4df1-9690-558260cb6bc3\"));case 34:responseKream=_context.sent;_context.next=37;return getSalesHistorySNKRDUNK(arrKor[_i].code,'');case 37:historySnkrDunk=_context.sent;if(historySnkrDunk&&historySnkrDunk.length>7){isHistorySnkrDunkOk=true;}min_priceJp=Math.floor(responseJP.data.minPrice*rateJp);min_priceKream=Math.floor(responseKream.data.items[0].product.market.lowest_ask*rateKor);if(min_priceJp-min_priceKream>=1000000){isPriceSnkrDunkOk=true;}else if(min_priceKream-min_priceJp>=1000000){isPriceKreamOk=true;}if(isHistorySnkrDunkOk&&isPriceSnkrDunkOk){isSnkrDunkOk=true;}arrKor[_i]=_objectSpread(_objectSpread({},arrKor[_i]),{},{min_priceJp:VND.format(min_priceJp),min_priceKream:VND.format(min_priceKream),isSnkrDunkOk:isSnkrDunkOk,isKreamOk:isKreamOk});_context.next=49;break;case 46:_context.prev=46;_context.t0=_context[\"catch\"](22);return _context.abrupt(\"return\",arrKor[_i]);case 49:_i++;_context.next=21;break;case 52:return _context.abrupt(\"return\",arrKor);case 53:case\"end\":return _context.stop();}},_callee,null,[[22,46]]);}));return function getDataMenu(_x,_x2){return _ref.apply(this,arguments);};}();","map":{"version":3,"names":["VND","getRateJp","getRateKor","instance","instanceKream","getIdProductKream","getSalesHistorySNKRDUNK","getDataMenu","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","type","page","response","rateKor","rateJp","data","arrKor","i","result","_i","isPriceSnkrDunkOk","isSnkrDunkOk","isHistorySnkrDunkOk","isHistoryKreamOk","isPriceKreamOk","isKreamOk","responseJP","responseKream","historySnkrDunk","min_priceJp","min_priceKream","wrap","_callee$","_context","prev","next","get","concat","sent","product_info","list","map","item","model_no","length","slice","code","brand_name_eng","min_priceSoldOut","format","Math","floor","min_price","name","name_eng","img","image_path","push","minPrice","items","product","market","lowest_ask","_objectSpread","t0","abrupt","stop","_x","_x2","apply","arguments"],"sources":["/Users/doandinhan/Documents/workspace/getDataSNKRDUNK/getdata/src/DataMenu/getDataMenu.js"],"sourcesContent":["import { VND } from \"../changeCurrency/changeCurrency\";\nimport { getRateJp, getRateKor } from \"../rate\"\nimport { instance, instanceKream } from \"../services\"\nimport { getIdProductKream } from \"../getDataFromKream/getIdProductKream\";\nimport {getSalesHistorySNKRDUNK} from '../getDataFromSNKRDUNK/getSalesHistorySNKRDUNK'\n\nexport const getDataMenu = async (type, page) => {\n    const response = await instance.get(`https://www.soldout.co.kr/api/v3/search/get-item-list?&typeGb=goods&pageIndex=${page}&pageSize=12&keyword=${type}`)\n    const rateKor = await getRateKor();\n    const rateJp = await getRateJp();\n    const data = response.data.data.product_info.list.map(\n        (item) => {\n            for (let i = 0; i < item.model_no.length; i++) {\n                if (item.model_no[i] == ' ' || item.model_no[i] == '/') {\n                    item.model_no = item.model_no.slice(0, -item.model_no.length + i)\n                }\n            }\n\n            return {\n                code: item.model_no,\n                type: item.brand_name_eng,\n                min_priceSoldOut: VND.format(Math.floor(item.min_price*rateKor)),\n                name: item.name_eng,\n                img: item.image_path\n            }\n\n        }\n    )\n    const arrKor = []\n    for(let i = 0; i<data.length;i++) {\n        const result = await data[i]\n        arrKor.push(result)\n    }\n\n    for(let i=0; i<arrKor.length; i++) {\n        try {\n            let isPriceSnkrDunkOk = false\n            let isSnkrDunkOk = false\n            let isHistorySnkrDunkOk = false\n            let isHistoryKreamOk = false\n            let isPriceKreamOk = false\n            let isKreamOk = false\n            const responseJP = await instance.get(`https://snkrdunk.com/v1/products/${arrKor[i].code}/sales-history?`)\n            const responseKream = await instanceKream.get(`https://kream.co.kr/api/p/tabs/all/?keyword=${arrKor[i].code}&request_key=59f3e93d-13b1-4df1-9690-558260cb6bc3`)\n            const historySnkrDunk  = await getSalesHistorySNKRDUNK(arrKor[i].code, '');\n            if(historySnkrDunk && historySnkrDunk.length>7) {\n                isHistorySnkrDunkOk = true\n            }\n            const min_priceJp = (Math.floor(responseJP.data.minPrice*rateJp))\n            const min_priceKream = (Math.floor(responseKream.data.items[0].product.market.lowest_ask*rateKor))\n            \n            if(min_priceJp-min_priceKream>=1000000) {\n                isPriceSnkrDunkOk = true\n            } else if(min_priceKream-min_priceJp>=1000000) {\n                isPriceKreamOk = true\n            }\n\n            if(isHistorySnkrDunkOk && isPriceSnkrDunkOk) {\n                isSnkrDunkOk = true\n            }\n            arrKor[i] = {\n                ...arrKor[i],\n                min_priceJp: VND.format(min_priceJp),\n                min_priceKream: VND.format(min_priceKream),\n                isSnkrDunkOk: isSnkrDunkOk,\n                isKreamOk: isKreamOk\n            }\n        } catch(msg) {\n            return arrKor[i]\n        }\n    }\n    return arrKor\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}